@page "/Mermaid"
@inject IHttpClientFactory ClientFactory
@inject IJSRuntime JS
@inject NavigationManager NavigationManager
<h3>Mermaid</h3>

<button class="btn btn-primary" @onclick="OnLoad">Load</button>

<div id="mermaid" class="mermaid"></div>

@code {
    private string? _mermaidText;

    private async Task OnLoad()
    {
        var client = ClientFactory.CreateClient();
        var uri = new Uri(new Uri(NavigationManager.BaseUri), "/api/Mermaid");
        var result = await client.GetAsync(uri);
        _mermaidText = await result.Content.ReadAsStringAsync();
        await JS.InvokeVoidAsync("reset_mermaid", _mermaidText);
    }
}